<!DOCTYPE html>
<html>

<head>
  <title>
    rock_paper_scissors
  </title>
  <style>
  </style>
</head>

<body>
  <button onclick="
    computerMove = pickComputerMove();
    getResult(computerMove, 'rock');
    ">
    ✊
  </button>
  <button onclick="
    computerMove = pickComputerMove();
    getResult(computerMove, 'paper');
  ">
    🖐️
  </button>
  <button onclick="
    computerMove = pickComputerMove();
    getResult(computerMove, 'scissors');
  ">
    ✌️
  </button>
  <button onclick="
  score = {
    wins: 0,
    loses: 0,
    drows: 0
  }
  localStorage.removeItem('score')
  ">
    reset
  </button>
  <script>
    let score = JSON.parse(localStorage.getItem('score'))

    if (score === null) {
      score = {
        wins: 0,
        loses: 0,
        drows: 0
      }
    }

    function getResult(computerMove, yourMove) {
      if (yourMove === 'rock') {
        if (computerMove === 'rock') {
          result = 'drow'
        }
        else if (computerMove === 'paper') {
          result = 'won'
        }
        else {
          result = 'lost'
        }
      }

      if (yourMove === 'paper') {
        if (computerMove === 'rock') {
          result = 'won'
        }
        else if (computerMove === 'paper') {
          result = 'drow'
        }
        else {
          result = 'lost'
        }
      }

      if (yourMove === 'scissors') {
        if (computerMove === 'rock') {
          result = 'lost'
        }
        else if (computerMove === 'paper') {
          result = 'won'
        }
        else {
          result = 'drow'
        }
      }

      if (result === 'won') {
        score.wins += 1
      }
      else if (result === 'lost') {
        score.loses += 1
      }
      else {
        score.drows += 1
      }
      
      localStorage.setItem('score', JSON.stringify(score));

      console.log(`you: ${result}  
      wins: ${score.wins}
      loses: ${score.loses}
      drows: ${score.drows}`)
    }


    function pickComputerMove() {
      const randomNum = Math.random();
      let computerMove = '';

      if (randomNum >= 0 && randomNum < 1 / 3) {
        computerMove = 'rock';
      }
      else if (randomNum >= 1 / 3 && randomNum < 2 / 3) {
        computerMove = 'paper';
      }
      else {
        computerMove = 'scissors';
      }
      return computerMove
    }
  </script>

</body>

</html>
